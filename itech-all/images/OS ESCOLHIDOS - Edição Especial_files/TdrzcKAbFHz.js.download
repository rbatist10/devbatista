if (self.CavalryLogger) { CavalryLogger.start_js(["X81C\/"]); }

__d("XD",["FBJSON","Stratcom","lowerFacebookDomain","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k={send:function(a,b){__p&&__p();k._ensureInit();if(!window.postMessage||!window.JSON)return;if(!window.parent)return;var c=g.stringify(a);b=b?/https?:\/\/[^\/]*/.exec(b)[0]:"*";a="fb_xdm_frame_"+location.protocol.replace(/:/,"");var d=window.parent.frames[a];if(d){var e=50;a=function a(){d.proxyMessage?d.proxyMessage(c,b):--e&&j(a,100)};a()}else window.parent.postMessage(c,b)},register:function(a,b,c){k._ensureInit(),h.listen("xd_msg",null,function(event){var d=event.getData();(d.cb==a||d.method==a)&&(c||h.removeCurrentListener(),b(d))})},guid:function(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")},_onMessage:function(event){var a=event.data;if(typeof a==="string")try{a=g.parse(a,e.id)}catch(a){}a&&(a.cb||a.method)&&h.invoke("xd_msg",null,a)},_ensureInit:function(){if(!k._initialized)k._initialized=!0;else return;document.domain.toLowerCase().match(/(^|\.)facebook\..*/)&&i();window.addEventListener("message",k._onMessage,!1)}};e.exports=k}),null);
__d("MEmbeddedVideo",["BanzaiODS","DOM","FBLogger","MProgressiveVideoPlayerApi","MVideoExperiments","MVideoUtils","PHPQuerySerializer","Stratcom","SubscriptionsHandler","URI","VideoPlayerReason","XD"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){__p&&__p();var s,t,u,v=null,w=null,x=!1,y=!1,z=!1;!1;var A={playing:"startedPlaying",pause:"paused",ended:"finishedPlaying",waiting:"startedBuffering",buffered:"finishedBuffering",error:"error"},B=!1;function a(a,b,c,d,e){g.bumpEntityKey("membedded_video.setupListeners","started");try{e&&e.init(q.USER),C(a,b,c,d),g.bumpEntityKey("membedded_video.setupListeners","finished")}catch(a){g.bumpEntityKey("membedded_video.setupListeners.failed","exception");throw a}}function C(a,b,c,d){__p&&__p();B=d;(!B||a)&&(w=new p(a));t=c;s=l.createVideoNode();s.muted;s.volume;d={type:"onVideoAPIReady",data:JSON.stringify({isMuted:s.muted,volume:s.volume,timePosition:s.currentTime,duration:0})};F(d);u||(u=new o());u.addSubscriptions(h.listen(s,"loadedmetadata",null,function(){E({isMuted:s.muted,volume:s.volume,timePosition:s.currentTime,duration:s.duration}),s.muted,s.volume}),h.listen(s,"playing",null,function(){z===!0?(z=!1,D("buffered"),x===!1&&D("playing")):(y=!1,D("playing")),x=!0}),h.listen(s,"pause",null,function(){!s.ended&&!y&&(y=!0,D("pause"))}),h.listen(s,"ended",null,function(){D("ended"),x=!1}),h.listen(s,"waiting",null,function(){z=!0,D("waiting")}),h.listen(s,"timeupdate",null,function(){E({timePosition:s.currentTime})}),h.listen(s,"volumechange",null,function(){E({volume:s.volume,isMuted:s.volume===0||s.muted}),s.muted,s.volume}));s.src=b;h.prependContent(c,s);n.listen("Connect.Unsafe.play",null,H);n.listen("Connect.Unsafe.pause",null,function(){v&&v.pause(q.EMBEDDED_VIDEO_API)});n.listen("Connect.Unsafe.seek",null,function(a){s.currentTime=a.getData().target});n.listen("Connect.Unsafe.mute",null,function(){s.muted=!0});n.listen("Connect.Unsafe.unmute",null,function(){s.muted=!1});n.listen("Connect.Unsafe.setVolume",null,function(a){s.volume=a.getData().volume});n.listen("click",l.PLAY_SIGIL,J)}function D(event){event in A&&F({type:"stateChange",state:A[event]})}function E(a){F({type:"cachedStateUpdateRequest",data:JSON.stringify(a)})}function F(a){__p&&__p();g.bumpEntityKey("membedded_video.sendDataToSDK","started");if(B&&!w){g.bumpEntityKey("membedded_video.sendDataToSDK.failed","no_channeluri");return}try{G(a),g.bumpEntityKey("membedded_video.sendDataToSDK","finished")}catch(a){g.bumpEntityKey("membedded_video.sendDataToSDK.failed","exception");if(!B)throw a}}function G(a){var b={},c=m.deserialize(w.getFragment());Object.assign(b,a,c);r.send(b,new p(c.origin).getOrigin())}function H(a){v?v.play(q.EMBEDDED_VIDEO_API):J(a)}var I=!1;function J(a){__p&&__p();g.bumpEntityKey("membedded_video.onClickPlay","started");s||g.bumpEntityKey("membedded_video.onClickPlay.failed","no_player");h.listen(s,"playing",null,function(){if(I)return;g.bumpEntityKey("membedded_video.onClickPlay","playing");I=!0});try{K(a),g.bumpEntityKey("membedded_video.onClickPlay","finished")}catch(a){g.bumpEntityKey("membedded_video.onClickPlay.failed","exception");throw a}}function K(a){a.prevent();var b=l.getVideoDataFromMVideo(t);b.videoElement=s;k.create_api_on_serverside&&(v=b[l.API_INSTANCE_KEY],v||i("mtouch_video").mustfix("MEmbeddedVideo: _videoUnit is expected but not found"));v||(v=new j(t),v.init(q.USER));v.show(!1);v.play();l.handleLoggingOnPlay(a,v,b)}f.setupListeners=a}),null);
__d("PluginXDReady",["PHPQuerySerializer","Stratcom","URI","XD"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();b={handleMessage:function(a){if(!a.method)return;try{h.invoke("Connect.Unsafe."+a.method,null,JSON.parse(a.params))}catch(a){}}};a.XdArbiter=b;c={init:function(a){a=new i(a);var b={},c={xd_action:"plugin_ready",name:window.name};a=g.deserialize(a.getFragment());Object.assign(b,c,a);j.send(b,new i(a.origin).getOrigin())}};e.exports=c}),null);
if (self.CavalryLogger) { CavalryLogger.start_js(["kGkLh"]); }

__d("MFullScreen",[],(function(a,b,c,d,e,f){__p&&__p();a={debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d);d=setTimeout(g,b);h&&a.apply(e,f)}},isSupported:function(){var a=document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.fullscreenEnabled,b=document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.cancelFullScreen||document.exitFullScreen;return a&&b},isFullScreen:function(){return document.webkitIsFullScreen||document.fullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement},enableFullScreen:function(a){a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen?a.msRequestFullscreen():a.requestFullScreen?a.requestFullScreen():a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()},disableFullScreen:function(){document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.exitFullScreen&&document.exitFullScreen()},listenForFullScreenEvent:function(a,b){var c=this.debounce(b,500),d=["webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange","fullscreenchange"];d.forEach(function(b){return a.addEventListener(b,c)});return{remove:function(){d.forEach(function(b){return a.removeEventListener(b,c)})}}},removeFullScreenEventListeners:function(a,b){var c=this.debounce(b,500);a.removeEventListener("webkitfullscreenchange",b);a.removeEventListener("mozfullscreenchange",b);a.removeEventListener("MSFullscreenChange",b);a.removeEventListener("fullscreenchange",c)}};e.exports=a}),null);
__d("mergeDeepInto",["invariant","mergeHelpers"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h.ArrayStrategies,j=h.checkArrayStrategy,k=h.checkMergeArrayArgs,l=h.checkMergeLevel,m=h.checkMergeObjectArgs,n=h.isTerminal,o=h.normalizeMergeArg,p=function(a,b,c,d){m(a,b);l(d);var e=b?Object.keys(b):[];for(var f=0;f<e.length;f++){var g=e[f];r(a,b,g,c,d)}},q=function(a,b,c,d){k(a,b);l(d);if(c===i.Concat)a.push.apply(a,b);else{var e=Math.max(a.length,b.length);for(var f=0;f<e;f++)r(a,b,f,c,d)}},r=function(a,b,c,d,e){var f=b[c];b=Object.prototype.hasOwnProperty.call(b,c);var h=b&&n(f),j=b&&Array.isArray(f),k=b&&!j&&!j,l=a[c],m=Object.prototype.hasOwnProperty.call(a,c),o=m&&n(l),r=m&&Array.isArray(l),s=m&&!r&&!r;o?h?a[c]=f:j?(a[c]=[],q(a[c],f,d,e+1)):k?(a[c]={},p(a[c],f,d,e+1)):b||(a[c]=l):r?h?a[c]=f:j?(i[d]||g(0),d===i.Clobber&&(l.length=0),q(l,f,d,e+1)):k?(a[c]={},p(a[c],f,d,e+1)):!b:s?h?a[c]=f:j?(a[c]=[],q(a[c],f,d,e+1)):k?p(l,f,d,e+1):!b:m||(h?a[c]=f:j?(a[c]=[],q(a[c],f,d,e+1)):k?(a[c]={},p(a[c],f,d,e+1)):!b)};a=function(a,b,c){b=o(b);j(c);p(a,b,c,0)};e.exports=a}),null);
__d("AsyncStorage",["Deferred","mergeDeepInto","mergeHelpers"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=i.ArrayStrategies,k=window.indexedDB,l=1,m="data",n=!1,o;b=Date.now();var p=new g();function a(){__p&&__p();var a=k.open("AsyncStorage",l);a.onerror=function(event){var a=new Error("Failed to open AsyncStorage IndexedDB instance.");!1;p.reject(a)};a.onsuccess=function(event){n&&!1,o=event.target.result,p.resolve({db:o}),o.onerror=function(a){a=new Error("AsyncStorage error: "+a.target.error.message);!1;p.reject(a)}};a.onupgradeneeded=function(a){a=a.currentTarget.result;if(a.objectStoreNames&&a.objectStoreNames.contains(m))return;a.createObjectStore(m,{keyPath:"key"})}}k&&a();function q(a,b){if(o)try{a()}catch(a){!1,b&&b(a)}else p.then(function(){n&&!1,q(a,b)},function(a){!1,b&&b(a)})}c={setItem:function(a,b,c){this.multiSet([[a,b]],function(a){c(a&&a[0]||null)})},getItem:function(a,b){this.multiGet([a],function(a,c){c=c!==undefined&&c[0]!==undefined&&typeof c[0][1]!==undefined?c[0][1]:null;b(a&&a[0]||null,c)})},removeItem:function(a,b){this.multiRemove([a],function(a){b(a&&a[0]||null)})},multiGet:function(a,b){var c=[];this._multiOp(a,"readonly",function(a){return b(a,c)},function(a){return a},function(a,b,d){b&&a===b.key?(n&&!1,c.push([a,b.value.value])):c.push([a,null])})},multiSet:function(a,b){this._multiOp(a,"readwrite",b,function(a){return a[0]},function(a,b,c){if(b&&a[0]===b.key){var d=b.value;d.value=a[1];n&&!1;b.update(d)}else c.push(a)})},multiMerge:function(a,b){__p&&__p();this._multiOp(a,"readwrite",b,function(a){return a[0]},function(a,b,c){if(b&&a[0]===b.key){var d=b.value,e=JSON.parse(d.value);h(e,JSON.parse(a[1]),j.Clobber);n&&!1;d.value=JSON.stringify(e);b.update(d)}else n&&!1,c.push(a)})},multiRemove:function(a,b){this._multiOp(a,"readwrite",b,function(a){return a},function(a,b,c){b&&a===b.key&&(n&&!1,b["delete"]())})},getAllKeys:function(a){__p&&__p();q(function(){__p&&__p();var b=o.transaction([m],"readonly");b=b.objectStore(m).openCursor();var c=[];b.onsuccess=function(event){var b=event.target.result;if(!b){a(null,c);return}c.push(b.key);b["continue"]()}},function(){return a(null,[])})},clear:function(a){__p&&__p();q(function(){__p&&__p();var b=o.transaction([m],"readwrite");b=b.objectStore(m).openCursor();b.onsuccess=function(event){var b=event.target.result;if(!b){a(null);return}b["delete"]();b["continue"]()}},function(){return a(null)})},_multiOp:function(a,b,c,d,e){__p&&__p();q(function(){__p&&__p();var f=!1,g=a.slice().sort(function(a,b){__p&&__p();a=d(a);b=d(b);if(a===b){var e=new Error("AsyncStorage._multiOp cannot process duplicate keys.");!1;c&&c([e]);f=!0;return 0}return a<b?-1:1});if(f)return;var h=o.transaction([m],b),i=h.objectStore(m).openCursor(),j=[],k=0;i.onsuccess=function(event){__p&&__p();var a=event.target.result;if(!a){while(k<g.length)e(g[k],a,j),k++;l();return}var b=a.key;n&&!1;while(d(g[k])<=b){n&&!1;e(g[k],a,j);k++;if(k===g.length){l();return}}b=d(g[k]);a["continue"](b)};function l(){var a=h.objectStore(m);j.forEach(function(b){n&&!1,a.add({key:b[0],value:b[1]})})}h.oncomplete=function(){c&&c(null)};h.onerror=function(event){var a=new Error("IndexedDB error: "+event.target.error.message);!1;c&&c([a])};n&&!1},function(a){c&&c([a])})}};e.exports=c}),null);
__d("MVideoCacheConfig",["CurrentUser","MVideoDownloadConfig","md5","WebStorage"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=null,k={CACHE_PREFIX:"vc",PREFIX_SEPARATOR:"_",CONFIG_PREFIX:"config",KEYS:{lastCleanUp:"lastCleanUp"},isSupported:function(){try{j||(j=b("WebStorage"));return j.getLocalStorage()}catch(a){j=null;return!1}},currentAccountHash:function(){var a=""+g.getAccountID();return i(a)},getUserPrefix:function(){return k.CACHE_PREFIX+k.PREFIX_SEPARATOR+k.currentAccountHash()+k.PREFIX_SEPARATOR},getCacheConfigKey:function(){return k.CACHE_PREFIX+k.PREFIX_SEPARATOR+k.CONFIG_PREFIX+k.PREFIX_SEPARATOR+k.currentAccountHash()},initCacheConfig:function(){var a={},b=Date.now()-2*h.cache_sync_interval_ms;a[k.KEYS.lastCleanUp]=b;a=JSON.stringify(a);b=k.getCacheConfigKey();j.getLocalStorage().setItem(b,a);return a},getCacheConfig:function(){var a=k.getCacheConfigKey();a=j.getLocalStorage().getItem(a);try{JSON.parse(a)}catch(b){a=null}a===null&&(a=k.initCacheConfig());a=JSON.parse(a);return a},getItemFromConfig:function(a){var b=k.getCacheConfig();return b[a]},setItemFromConfig:function(a,b){var c=k.getCacheConfig();c[a]=b;c=JSON.stringify(c);a=k.getCacheConfigKey();j.getLocalStorage().setItem(a,c)}};e.exports=k}),null);
__d("XHRRequestRetrier",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a){"use strict";this.$1=a,this.$2=!1,this.$3=0,this.$4=0,this.$5=0,this.$6=1e3,this.$7=2,this.$8=.5,this.$9=a.getErrorHandler(),a.setErrorHandler(this.$11.bind(this)),this.$10=a.getAbortHandler(),a.setAbortHandler(this.$12.bind(this))}a.prototype.setMaxAttempts=function(a){"use strict";this.$5=a;return this};a.prototype.setBaseRetryDelayMs=function(a){"use strict";this.$6=a;return this};a.prototype.setRetryBackoffFactor=function(a){"use strict";this.$7=a;return this};a.prototype.setRetryFuzzFactor=function(a){"use strict";this.$8=a;return this};a.prototype.send=function(){"use strict";if(this.$2)return;if(this.$1.getTimeout())throw new Error("Not supported.");this.$3++;this.$4||(this.$4=this.$6);this.$1.send()};a.prototype.$11=function(){"use strict";this.$3<this.$5?this.$13():this.$9&&this.$9.apply(this,arguments)};a.prototype.$12=function(){"use strict";this.$2=!0,this.$10&&this.$10.apply(this,arguments)};a.prototype.$13=function(){"use strict";var a=this.send.bind(this),b=Math.random()*2-1;b=b*this.$8;b=this.$4*(1+b);g(a,b);this.$4*=this.$7};e.exports=a}),null);
__d("URIDownloader",["URI","XHRRequest","XHRRequestRetrier","invariant"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=2e5,l=15,m=2e3,n=1.5;function a(a,b){"use strict";this.$1=new g(a),this.$2=b,this.$3=0,this.$4=0,this.$5=[]}a.prototype.setResponseHandler=function(a){"use strict";this.$10&&j(0);this.$9=a;return this};a.prototype.setChunkedResponseHandler=function(a){"use strict";this.$9&&j(0);this.$10=a;return this};a.prototype.setErrorHandler=function(a){"use strict";this.$11=a;return this};a.prototype.setAbortHandler=function(a){"use strict";this.$12=a;return this};a.prototype.setProgressHandler=function(a){"use strict";this.$13=a;return this};a.prototype.$14=function(a){"use strict";if(this.$8)return;this.$13&&this.$13({total:this.$2,loaded:this.$4+(a?a:0)})};a.prototype.$15=function(){"use strict";if(this.$8)return;if(this.$9){var a=null;this.$5&&(a=new Blob(this.$5));this.$9(a)}this.$10&&this.$10(this.$5)};a.prototype.$16=function(a){"use strict";if(this.$8)return;this.$17(a)?this.$4<this.$2?(this.$14(),this.$18()):this.$15():this.$19()};a.prototype.$19=function(){"use strict";if(this.$8)return;this.$11&&this.$11()};a.prototype.$20=function(){"use strict";if(this.$8)return;this.$12&&this.$12()};a.prototype.$21=function(){"use strict";var a=Math.min(this.$4+k,this.$2);this.$3=a-this.$4};a.prototype.$17=function(a){"use strict";if(this.$8)return!1;if(this.$3!==a.size)return!1;this.$5.push(a);this.$4+=this.$3;this.$3=0;return!0};a.prototype.$18=function(){"use strict";__p&&__p();if(this.$8)return;var a=new h(this.$1).setMethod("GET").setResponseType("blob").setResponseHandler(this.$16.bind(this)).setErrorHandler(this.$19.bind(this)).setAbortHandler(this.$20.bind(this)).setDownloadProgressHandler(function(a){a.loadedBytes&&this.$14(a.loadedBytes)}.bind(this));this.$21();a.setRequestHeader("Range","bytes="+this.$4+"-"+(this.$4+this.$3-1));this.$7=a;a=new i(a).setMaxAttempts(l).setBaseRetryDelayMs(m).setRetryBackoffFactor(n);this.$6=a;try{a.send()}catch(a){this.$19()}};a.prototype.sendRequest=function(){"use strict";this.$4=0,this.$18()};a.prototype.abort=function(){"use strict";this.$8=!0,this.$7&&this.$7.abort?this.$7.abort():this.$12&&this.$12(),this.$22()};a.prototype.$22=function(){"use strict";this.$7=null,this.$5=null,this.$12=null,this.$11=null,this.$9=null,this.$13=null};e.exports=a}),null);
__d("VideoDownloadDeleteReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CACHE_SYNC:"cache_sync",CONSISTENCY_CHECK:"consistency_check",USER_INITIATED:"user_initiated",CHUNKED_PLAYBACK_NOT_SUPPORTED:"chunked_playback_not_supported"})}),null);
__d("XVideoDownloadEventController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video_download_event/",{video_id:{type:"Int",required:!0},viewer_id:{type:"Int",required:!0},app_id:{type:"Int",required:!0},event:{type:"Enum",required:!0,enumType:1}})}),null);
__d("VideoDownloadEventHandler",["CurrentUser","DataAttributeUtils","MRequest","XVideoDownloadEventController"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=412378670482;function a(a,b,event){"use strict";this.$1=a,this.$2=b,this.$3=event}a.prototype.sendServerDownloadEvent=function(){"use strict";var a=j.getURIBuilder().setInt("video_id",this.$1).setInt("viewer_id",g.getAccountID()).setInt("app_id",k).setEnum("event",this.$3).getURI(),b=null;this.$2&&(b=h.getDataFt(this.$2));new i(a).setMethod("POST").setData({ft_data:b}).send()};e.exports=a}),null);
__d("VideoDownloadLogger",["Bootloader","CurrentUser","md5"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=null,k=null,l=2147483647,m="video_download";function n(){return Date.now()}function o(a){"use strict";a=a?a:{},this.$1=a}o.prototype.$2=function(event,a){"use strict";a=babelHelpers["extends"]({},a,this.$1);!event;Object.prototype.hasOwnProperty.call(a,"time_ms")||(a.time_ms=n());Object.prototype.hasOwnProperty.call(a,"connectivity_type")||(a.connectivity_type=k.getConnectivityType());a={logData:a,event:event};j.post(m,a)};o.prototype.logEvent=function(event,a){"use strict";!j||!k?g.loadModules(["Banzai","MVideoUtils"],function(b,c){j=b,k=c,this.$2(event,a)}.bind(this),"VideoDownloadLogger"):this.$2(event,a)};o.time=function(){"use strict";return Math.floor(Date.now()/1e3)};o.generateSessionID=function(){"use strict";return i([h.getID(),o.time(),Math.random()*l].join(":"))};e.exports=o}),null);
__d("VideoDownloadLoggerEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CONTROL_IMPRESSION:"control_impression",DOWNLOAD_CANCELLED:"download_cancelled",DOWNLOAD_DELETED:"download_deleted",DOWNLOAD_FAILED:"download_failed",DOWNLOAD_FINISHED:"download_finished",DOWNLOAD_PROGRESS:"download_progress",DOWNLOAD_REQUESTED:"download_requested",SLOW_PLAYBACK_DETECTED:"slow_playback_detected",SURVEY_URI_REQUESTED:"survey_uri_requested",SURVEY_IMPRESSION_ATTEMPT:"survey_impression_attempt",SURVEY_PROMPT_RESULT:"survey_prompt_result",QUALITY_SELECTED:"quality_selected",QUALITY_SELECTOR_IMPRESSION:"quality_selector_impression",QUALITY_SELECTOR_NO_QUALITIES_AVAILABLE:"quality_selector_no_qualities_available",REQUESTED_PLAYING:"requested_playing",PAGE_SETTING_CHANGE:"page_setting_change"})}),null);
__d("VideoDownloadLoggerFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({APP_ID:"app_id",AVAILABLE_QUALITIES:"available_qualities",AVAILABLE_QUALITIES_COUNT:"available_qualities_count",BYTES_DOWNLOADED:"bytes_downloaded",CONFIG_NAME:"config_name",CONNECTIVITY_TYPE:"connectivity_type",DELETE_REASON:"delete_reason",DEVICE_YEAR_CLASS:"device_year_class",DOWNLOAD_ORIGIN:"download_origin",DOWNLOAD_SETTING:"download_setting",ELAPSED_TIME_MS:"elapsed_time_ms",ERROR:"error",ERROR_CODE:"error_code",EVENT_NAME:"event_name",EVENT_ORIGIN:"event_origin",EVENT_SUBORIGIN:"event_suborigin",IS_EMPLOYEE:"is_employee",IS_VISIBLE:"is_visible",OWNER_ID:"owner_id",QUALITY:"quality",REASON:"reason",SAVED_OFFLINE:"saved_offline",SESSION_ID:"session_id",TOTAL_SIZE:"total_size",TIME_MS:"time_ms",VIDEO_ID:"video_id"})}),null);
__d("VideoDownloadReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUTO_INITIATED:"auto_initiated",USER_INITIATED:"user_initiated"})}),null);
__d("MVideoCache",["MLegacyDataStore","MVideoCacheConfig","MVideoDownloadConfig","URIDownloader","VideoDownloadDeleteReason","VideoDownloadEventHandler","VideoDownloadLogger","VideoDownloadLoggerEvent","VideoDownloadLoggerFields","VideoDownloadReason","emptyFunction","AsyncStorage","WebStorage"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){__p&&__p();var r=null,s=null,t={},u=500,v=4e9,w=0,x={audio:"audio",video:"video"};function y(a,b){"use strict";this.$1=a,this.$2=b,a.chunked?this.$3=b===x.video?a.videoChunkCount:a.audioChunkCount:this.$3=1,this.$4=0}y.prototype.getNextBuffer=function(a){"use strict";if(this.$4>=this.$3)a(null);else{var b=this.$4++;z.getCachedStream(this.$1,this.$2,function(b){a(b)},a,this.$1.chunked?b:null)}};var z={DEFAULT_QUALITY_TAG:"default",DOWNLOAD_STARTED_TIME:"downloadStartedTime",DOWNLOAD_REASON:"downloadReason",OFFLINE_LIFESPAN:"offlineLifespan",VIEW_COUNT:"viewCount",RESOURCE_STATE:{loading:"loading",finished:"finished",error:"error"},ERROR:{QUOTA_EXCEEDED:1,NO_ACCESS:2},isDownloadInProgress:function(){return!z.isEmptyObject(t)},isSupported:function(){try{r||(r=b("AsyncStorage"));s||(s=b("WebStorage"));return s.getLocalStorage()&&window.indexedDB&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota}catch(a){r=null;s=null;return!1}},downloadVideo:function(a,b,c,d,e,f,g,h,i){__p&&__p();g===void 0&&(g={});h===void 0&&(h=p.USER_INITIATED);i===void 0&&(i=null);var j=JSON.parse(b),k=z.createVideoResource(j,f),l=z.createAudioResource(j,f);if(!k&&!l){d();return}var m=[];k&&m.push(k);l&&m.push(l);m=z.calculateTotalSize(b,f);var q=z.createTracking(a,m,j.offline_lifespan_ms,c,d,e,f,g.origin,h,i);if(!q){d();return}b={};b[o.EVENT_ORIGIN]=g.origin;b[o.EVENT_SUBORIGIN]=g.suborigin;z.logEventTracking(q,n.DOWNLOAD_REQUESTED,b);z.flushAsyncStorage(function(){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(a,b){var c=z.getTotalSizeOfLoadingResources();if(a+q.totalSize+c<z.getMaxCacheUsage()&&q.totalSize+c+z.getMinFreeSpace()<b)z.downloadPostQuotaCheck(q,k,l);else{c="Used: "+a+" Remaining: "+b+" MaxCacheUsage: "+z.getMaxCacheUsage()+" MinFreeSpace: "+z.getMinFreeSpace();z.onError(q,z.ERROR.QUOTA_EXCEEDED,c)}},function(){z.onError(q,z.ERROR.QUOTA_EXCEEDED)})})},getDownloadNotificationUri:function(a){a=JSON.parse(a);return a&&a.download_finished_notification_uri},deleteVideoByID:function(a,b,c,d){__p&&__p();d===void 0&&(d={});b=b?b:q;var e=z.getTracking(a),f={};f[o.EVENT_ORIGIN]=d.origin;f[o.EVENT_SUBORIGIN]=d.suborigin;f[o.REASON]=c||k.USER_INITIATED;if(e)z.logEventTracking(e,n.DOWNLOAD_CANCELLED,f),z.deleteTracking(e,!0);else{z.logEvent(a,n.DOWNLOAD_DELETED,f);d=new l(a,null,n.DOWNLOAD_DELETED);d.sendServerDownloadEvent()}z.deleteCachedVideoFromStorage(a,b)},calculateTotalSize:function(a,b){a=JSON.parse(a);a=z.getStreamsForQuality(a,b);return a&&z.calculateTotalSizeInState(a,undefined)},getQualitiesFromResources:function(a){__p&&__p();a=JSON.parse(a);a=a&&a.streams;if(!a)return null;var b=null,c={};for(var d=0;d<a.length;d++){var e=a[d],f=String(e.mimetype);if(f&&f.startsWith(x.video)){var g=Object.prototype.hasOwnProperty.call(e,"quality")&&String(e.quality);g&&(c[g]=e.size)}else f&&f.startsWith(x.audio)&&(b=e)}if(b)for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&c[h]&&(c[h]+=b.size);return c},deleteVideosByID:function(a,b,c){if(z.isSupported())for(var d=0;d<a.length;d++){var e=a[d];z.deleteVideoByID(e,function(){b(e)},c)}},isVideoDownloaded:function(a){if(z.isSupported()){a=z.getCachedVideoByID(a);if(a)return!0;else return!1}return!1},isVideoDownloading:function(a){return z.isSupported()?t&&t[a]:!1},getVideoSize:function(a,b,c){__p&&__p();if(z.isSupported()){var d=z.getTracking(a);if(d)return d.totalSize;d=z.getCachedVideoByID(a);if(d)return d.totalSize;if(b){a=z.calculateTotalSize(b,c);if(a&&a>0)return a}}return null},getVideoProgressByID:function(a){if(z.isSupported()){a=z.getTracking(a);if(a)return a.loaded}return 0},_fillMissingFieldsWithDefaults:function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d===z.DOWNLOAD_STARTED_TIME&&!Object.prototype.hasOwnProperty.call(a,d)&&(a.downloadStartedTime=0);d===z.DOWNLOAD_REASON&&!Object.prototype.hasOwnProperty.call(a,d)&&(a.downloadReason=p.USER_INITIATED);d===z.OFFLINE_LIFESPAN&&!Object.prototype.hasOwnProperty.call(a,d)&&(a.offlineLifespan=i.cache_default_offline_lifespan_ms)}return a},getCachedVideoByID:function(a){__p&&__p();if(!i.enabled&&!i.simulate_legacy_ux)return null;var b=z.createPrefix(a),c=null;try{c=s.getLocalStorage().getItem(b)}catch(a){}b=c&&JSON.parse(c);b=b&&z._fillMissingFieldsWithDefaults(b,[z.DOWNLOAD_STARTED_TIME,z.DOWNLOAD_REASON,z.OFFLINE_LIFESPAN]);if(i.simulate_legacy_ux)return null;if(b&&b.chunked&&!i.cache_chunked_playback_enabled){setTimeout(function(){z.deleteVideoByID(a,q,k.CHUNKED_PLAYBACK_NOT_SUPPORTED)},0);return null}return b},getCachedVideosMetadata:function(a,b){__p&&__p();a===void 0&&(a=[]);b===void 0&&(b=!1);var c={};if(!z.isSupported())return c;var d=s.getLocalStorage(),e=Object.keys(d),f=h.getUserPrefix();for(var g in e)if(Object.prototype.hasOwnProperty.call(e,g)&&e[g]&&e[g].startsWith(f)){var j=z.getVideoIDFromStorageKey(e[g]),k={};if(a.length>0){var l=null;try{l=d.getItem(e[g])}catch(a){if(!b)continue}l=l&&JSON.parse(l);if((!l||l.chunked&&!i.cache_chunked_playback_enabled)&&!b)continue;for(var m=0;m<a.length;m++){var n=a[m];l&&n in l&&(k[n]=l[n])}k=z._fillMissingFieldsWithDefaults(k,a)}c[j]=k}return c},getCachedVideoIDs:function(a){a===void 0&&(a=!1);return Object.keys(z.getCachedVideosMetadata([],a))},hasDownloadedVideos:function(){var a=z.getCachedVideoIDs();return a&&a.length&&a.length>0},getDownloadingVideos:function(){var a=Object.keys(t);return a},getVideoIDFromStorageKey:function(a){var b=h.PREFIX_SEPARATOR;return a.split(b)[2]||""},getCachedVideo:function(a){a=g.get(a);return z.getCachedVideoByID(a.videoID)},getCachedVideoStream:function(a,b,c){z.getCachedStream(a,x.video,b,c)},getCachedAudioStream:function(a,b,c){z.getCachedStream(a,x.audio,b,c)},getCachedVideoStreamObject:function(a){return new y(a,x.video)},getCachedAudioStreamObject:function(a){return new y(a,x.audio)},getMaxCacheUsage:function(){var a=v;i&&Object.prototype.hasOwnProperty.call(i,"max_cache_usage")&&(a=i.max_cache_usage);return a},getMinFreeSpace:function(){var a=w;i&&Object.prototype.hasOwnProperty.call(i,"min_free_space")&&(a=i.min_free_space);return a},downloadPostQuotaCheck:function(a,b,c){if(!z.addTracking(a)){z.onError(a);return}b&&z.sendResourceRequest(a,b);c&&z.sendResourceRequest(a,c)},calculateTotalSizeInState:function(a,b){var c,d=0,e=a.length;for(c=0;c<e;c++){var f=a[c];(!b||f.state===b)&&(d+=f.size)}return d},isEmptyObject:function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b)&&a[b])return!1;return!0},getTotalSizeOfLoadingResources:function(){var a=0;for(var b in t)if(Object.prototype.hasOwnProperty.call(t,b)&&t[b]){var c=t[b];a+=z.calculateTotalSizeInState(c.resources,z.RESOURCE_STATE.loading)}return a},deleteCachedVideoFromStorage:function(a,b){__p&&__p();a=z.createPrefix(a);try{s.getLocalStorage().removeItem(a)}catch(a){}z.getObjectKeysFromAsyncStorageByPrefix(a,function(a,c){if(a||!c){b();return}try{r.multiRemove(c,function(){b()})}catch(a){b()}})},flushAsyncStorage:function(a){__p&&__p();var b=z.createPrefix(0),c=["0"];c=new Blob(c,{type:"text/html"});try{r.setItem(b,c,function(){try{r.removeItem(b,function(){a()})}catch(b){a()}})}catch(c){try{r.removeItem(b,function(){a()})}catch(b){a()}}},getObjectKeysFromAsyncStorageByPrefix:function(a,b){__p&&__p();try{r.getAllKeys(function(c,d){if(c||!d){b(c);return}d=d.filter(function(b){return b.startsWith(a)});b(null,d)})}catch(a){b(a)}},getVideosFromAsyncStorage:function(a){__p&&__p();z.getObjectKeysFromAsyncStorageByPrefix(h.getUserPrefix(),function(b,c){if(b||!c){a(b);return}b=c.map(z.getVideoIDFromStorageKey);c=b.reduce(function(a,b){a[b]=!0;return a},{});a(null,Object.keys(c))})},makeLocalAsyncStorageConsistent:function(a,b){__p&&__p();var c=z.getCachedVideoIDs(!0);z.getVideosFromAsyncStorage(function(d,e){__p&&__p();if(d||!e){a();return}var f={};d=c.concat(e);d.forEach(function(a){!f[a]?f[a]=1:f[a]++});f=Object.keys(f).filter(function(a){return f[a]===1});f.length>0&&z.deleteVideosByID(f,b,k.CONSISTENCY_CHECK);a()})},getCachedStream:function(a,b,c,d,e){b=z.createPrefix(a.videoID,b,e);try{r.getItem(b,function(b,e){b?(z.deleteVideoByID(a.videoID),d()):c(e)})}catch(b){z.deleteVideoByID(a.videoID),d()}},saveVideoInLocalStorage:function(a){var b=a.videoID&&z.createPrefix(a.videoID);try{s.getLocalStorage().setItem(b,JSON.stringify(a))}catch(a){throw a}},saveCachedVideo:function(a){__p&&__p();var b={};b.downloadStartedTime=a.downloadStartedTime;b.downloadReason=a.downloadReason;b.videoID=a.videoID;b.quality=a.quality;b.audioCodec=z.getResourceCodec(a,x.audio);b.videoCodec=z.getResourceCodec(a,x.video);b.totalSize=a.totalSize;b.offlineLifespan=a.offlineLifespan;b.viewCount=0;b.sessionID=a.sessionID;b.downloadOrigin=a.origin;b.chunked=a.chunked;b.videoChunkCount=a.videoChunkCount;b.audioChunkCount=a.audioChunkCount;z.saveVideoInLocalStorage(b)},logPlaybackRequest:function(a,b,c){__p&&__p();var d=null;if(b){b=z.getCachedVideoByID(a);var e=b.viewCount||0;b.viewCount=e+1;z.saveVideoInLocalStorage(b)}else d=z.ERROR.NO_ACCESS;e={};e[o.ERROR_CODE]=d;e[o.REASON]=c;z.logEvent(a,n.REQUESTED_PLAYING,e)},createPrefix:function(a,b,c){a=h.getUserPrefix()+a+h.PREFIX_SEPARATOR+z.DEFAULT_QUALITY_TAG;b&&(a=a+h.PREFIX_SEPARATOR+b);c!=undefined&&c!=null&&(a=a+h.PREFIX_SEPARATOR+c);return a},createResource:function(a,b,c,d){var e={};e.src=a;e.type=b;e.state=z.RESOURCE_STATE.loading;e.codec=c;e.size=d;e.progress=0;return e},getDefaultVideoStream:function(a){__p&&__p();var b=null;for(var c=0;c<a.length;c++){var d=a[c],e=String(d.mimetype);if(e&&e.startsWith(x.video)){b=d;if(d["default"])return d}}return b},getStreamsForQuality:function(a,b){__p&&__p();var c=[];a=a&&a.streams;var d=!1,e=!1;for(var f=0;f<a.length;f++){var g=a[f],h=String(g.mimetype);if(h&&h.startsWith(x.video)&&!d){var i=String(g.quality);b&&i&&i===b&&(d=!!c.push(g))}else h&&h.startsWith(x.audio)&&!e&&(e=!!c.push(g))}if(!d){i=z.getDefaultVideoStream(a);i&&c.push(i)}return c},getUrlInfo:function(a,b,c){__p&&__p();a=z.getStreamsForQuality(a,c);if(!a)return null;c=null;for(var d=0;d<a.length;d++){var e=a[d],f=String(e.mimetype);if(f&&f.startsWith(b)){c=e;break}}return c},createVideoResource:function(a,b){a=z.getUrlInfo(a,x.video,b);return a&&z.createResource(a.url,x.video,a.codecs,a.size)},createAudioResource:function(a,b){a=z.getUrlInfo(a,x.audio,b);return a&&z.createResource(a.url,x.audio,a.codecs,a.size)},addTracking:function(a){if(t[a.videoID])return!1;t[a.videoID]=a;return!0},createTracking:function(a,b,c,d,e,f,g,h,j,k){__p&&__p();var l={};l.videoID=a;l.quality=g||z.DEFAULT_QUALITY_TAG;l.onDone=d;l.onError=e;l.onProgress=f;l.resources=[];l.deleted=!1;l.loaded=0;l.totalSize=b;l.offlineLifespan=c;l.sessionID=m.generateSessionID();l.origin=h;l.logger=z.createLogger(l);l.downloadStartedTime=Date.now();l.chunked=i.cache_chunked_storage_enabled;l.loggingDataCallback=k;l.downloadReason=j;return l},getTracking:function(a){return t[a]},deleteTracking:function(a,b){__p&&__p();var c={};c[o.REASON]=a.downloadReason;if(!a.deleted){a.deleted=!0;t[a.videoID]=null;if(b){for(b=0;b<a.resources.length;b++)try{a.resources[b].downloader&&a.resources[b].downloader.abort()}catch(b){z.logEventTracking(a,n.DOWNLOAD_FAILED,c)}}}},getResourceCodec:function(a,b){var c,d,e;e=a.resources.length;for(d=0;d<e;d++){c=a.resources[d];if(c.type===b)return c.codec}return null},updateTracking:function(a,b,c){__p&&__p();var d,e;if(a.deleted)return;c&&(b.state=c);b.state===z.RESOURCE_STATE.finished&&(b.type===x.video?a.videoChunkCount=b.chunkCount:b.type===x.audio&&(a.audioChunkCount=b.chunkCount));if(b.state===z.RESOURCE_STATE.loading)a.resources.push(b);else{c=z.RESOURCE_STATE.finished;b=a.resources.length;for(d=0;d<b;d++){e=a.resources[d];if(e.state===z.RESOURCE_STATE.loading){c=z.RESOURCE_STATE.loading;break}else e.state===z.RESOURCE_STATE.error&&(c=z.RESOURCE_STATE.error)}if(c===z.RESOURCE_STATE.error)z.deleteTracking(a),z.deleteCachedVideoFromStorage(a.videoID,function(){z.onError(a)});else if(c===z.RESOURCE_STATE.finished)try{z.saveCachedVideo(a),z.deleteTracking(a),z.onDone(a)}catch(b){z.deleteCachedVideoFromStorage(a.videoID,function(){z.onError(a)})}}},trackProgress:function(a){var b=0;for(var c in a.resources)Object.prototype.hasOwnProperty.call(a.resources,c)&&(b+=a.resources[c].progress);a.loaded=b;var d={};d[o.BYTES_DOWNLOADED]=a.loaded;z.logEventTracking(a,n.DOWNLOAD_PROGRESS,d);return b},sendResourceRequest:function(a,b){__p&&__p();var c=new j(b.src,b.size);a.chunked?c.setChunkedResponseHandler(function(c){__p&&__p();try{var d=[];for(var e=0;e<c.length;e++){var f=[],g=z.createPrefix(a.videoID,b.type,e);f.push(g);g=c[e];f.push(g);d.push(f)}r.multiSet(d,function(d){b.chunkCount=c.length,z.updateTracking(a,b,d?z.RESOURCE_STATE.error:z.RESOURCE_STATE.finished)})}catch(c){z.updateTracking(a,b,z.RESOURCE_STATE.error)}}):c.setResponseHandler(function(c){try{var d=z.createPrefix(a.videoID,b.type);r.setItem(d,c,function(c){z.updateTracking(a,b,c?z.RESOURCE_STATE.error:z.RESOURCE_STATE.finished)})}catch(c){z.updateTracking(a,b,z.RESOURCE_STATE.error)}});c.setErrorHandler(function(){z.updateTracking(a,b,z.RESOURCE_STATE.error)});c.setProgressHandler(function(c){c.total&&(b.progress=c.loaded,a.onProgress(z.trackProgress(a),a.totalSize))});c.setAbortHandler(function(){setTimeout(function(){z.updateTracking(a,b,z.RESOURCE_STATE.error)},u)});z.updateTracking(a,b);b.downloader=c;c.sendRequest()},createLogger:function(a){var b={};b[o.DOWNLOAD_ORIGIN]=a.origin;b[o.QUALITY]=a.quality;b[o.SESSION_ID]=a.sessionID;b[o.TOTAL_SIZE]=a.totalSize;b[o.VIDEO_ID]=a.videoID;return new m(b)},getLogger:function(a){return!a.logger?null:a.logger},logEvent:function(a,event,b){var c=new m();b=b||{};b[o.VIDEO_ID]=a;a=z.getCachedVideoByID(a);a&&(b[o.DOWNLOAD_ORIGIN]=a.downloadOrigin,b[o.SESSION_ID]=a.sessionID,b[o.TOTAL_SIZE]=a.totalSize,b[o.QUALITY]=b[o.QUALITY]?b[o.QUALITY]:a.quality,b[o.SAVED_OFFLINE]=1);c.logEvent(event,b)},logEventTracking:function(a,event,b){var c=this.getLogger(a);b=b||{};Object.prototype.hasOwnProperty.call(b,o.REASON)||(b[o.REASON]=a.downloadReason);if(a.loggingDataCallback){var d=a.loggingDataCallback;b=d(b)}b[o.ELAPSED_TIME_MS]=Date.now()-a.downloadStartedTime;c.logEvent(event,b)},onError:function(a,b,c){var d={};d[o.ERROR_CODE]=b;d[o.ERROR]=c;z.logEventTracking(a,n.DOWNLOAD_FAILED,d);a.onError(b)},onDone:function(a){z.logEventTracking(a,n.DOWNLOAD_FINISHED),a.onDone()}};e.exports=z}),null);
__d("MVideoDownloadState",[],(function(a,b,c,d,e,f){a={DOWNLOADING:"downloading",DOWNLOADED:"downloaded",DELETING:"deleting",NOTDOWNLOADED:"notdownloaded"};e.exports=a}),null);
__d("MVideoDownloadStateHandler",["MVideoCache","MVideoDownloadState"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=null;function j(){"use strict";this.$1={},this.$2={}}j.prototype.addListener=function(a,b){"use strict";this.$1[a]||(this.$1[a]=[]),this.$1[a].push(b)};j.removeListeners=function(a){"use strict";this.$3().$1[a]&&(this.$3().$1[a]=[])};j.prototype.setState=function(a,b){"use strict";a.forEach(function(a){this.$2[a]=b;if(!this.$1[a])return;a=this.$1[a];a.forEach(function(a){try{a.call(window,b)}catch(a){}})},this)};j.prototype.getState=function(a){"use strict";return this.$2[a]};j.$3=function(){"use strict";i||(i=new j());return i};j.listen=function(a,b){"use strict";this.$3().addListener(a,b),this.initializeState(a)};j.initializeState=function(a){"use strict";g.isVideoDownloaded(a)?j.downloaded([a]):g.isVideoDownloading(a)?j.downloading([a],g.getVideoProgressByID(a),g.getVideoSize(a)):j.deleted([a])};j.getState=function(a){"use strict";return this.$3().getState(a)};j.downloading=function(a,b,c){"use strict";this.$3().setState(a,{state:h.DOWNLOADING,loaded:b,total:c})};j.downloaded=function(a){"use strict";this.$3().setState(a,{state:h.DOWNLOADED})};j.cleanup=function(a){"use strict";this.$3().setState(a,{state:h.DELETING})};j.deleted=function(a,b){"use strict";this.$3().setState(a,{state:h.NOTDOWNLOADED,errorMessage:b})};e.exports=j}),null);
__d("XVideoCacheCleanUpController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video_cache_cleanup/",{video_ids:{type:"StringVector",required:!0}})}),null);
__d("MVideoCacheCleanUp",["MRequest","MVideoCache","MVideoCacheConfig","MVideoDownloadConfig","MVideoDownloadStateHandler","VideoDownloadDeleteReason","VideoDownloadReason","XVideoCacheCleanUpController","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();var p=1e4,q=null,r={clean:function(){__p&&__p();r.deleteExpiredVideos();q=null;var a=h.getCachedVideoIDs(!0);if(a.length==0){r.setLastCleanUpDate();return}a=n.getURIBuilder().setStringVector("video_ids",a).getURI();a=new g(a);a.setMethod("POST");a.listen("done",function(a){a=a.payload||{};if(!a.error){r.setLastCleanUpDate();a=[].concat(a.offlineDisabled,a.unaccessible,a.unsaved);a.length>0&&r.deleteVideosByID(a)}});a.send()},deleteExpiredVideos:function(){var a=h.getCachedVideosMetadata([h.DOWNLOAD_STARTED_TIME,h.DOWNLOAD_REASON,h.OFFLINE_LIFESPAN]),b=[],c=Date.now(),d=c-j.cache_auto_downloaded_videos_caching_interval_ms;for(var e in a){var f=a[e];(f.downloadReason===m.AUTO_INITIATED&&f.downloadStartedTime<d||f.downloadStartedTime<c-f.offlineLifespan)&&b.push(e)}b.length>0&&r.deleteVideosByID(b)},deleteVideosByID:function(a){h.deleteVideosByID(a,function(a){k.deleted([a])},l.CACHE_SYNC)},requestCleanUp:function(){if(i.isSupported()&&h.isSupported()){var a=r.getLastCleanUpDate(),b=Date.now()-j.cache_sync_interval_ms;a=a<b;a&&!q&&(q=o(function(){h.makeLocalAsyncStorageConsistent(r.clean,function(a){k.deleted([a])})},p))}},getLastCleanUpDate:function(){if(i.isSupported())return i.getItemFromConfig(i.KEYS.lastCleanUp);else return 0},setLastCleanUpDate:function(){if(i.isSupported()){var a=Date.now();i.setItemFromConfig(i.KEYS.lastCleanUp,a)}},checkAccess:function(a){a=a.downloadStartedTime;var b=r.getLastCleanUpDate();a=Math.max(a,b);b=Date.now();r.requestCleanUp();a=a+j.allowed_offline_access_interval_ms;a=a>b;return a}};e.exports=r}),null);
__d("MVideoPlaybackState",[],(function(a,b,c,d,e,f){a={NORMAL_PLAYBACK:"normalplayback",SLOW_PLAYBACK:"slowplayback",NOT_STARTED_PLAYBACK:"notstartedplayback"};e.exports=a}),null);
__d("Network",["mixInEventEmitter"],(function(a,b,c,d,e,f,g){__p&&__p();var h=!0,i=a.navigator.connection,j={0:"unknown",1:"ethernet",2:"wifi",3:"2g",4:"3g"};function b(){return h}function c(a){if(a==h)return;h=a;l.emit(a?"online":"offline")}function d(){return i?i.bandwidth:h?Infinity:0}function f(){return i?i.metered:!1}function k(){var a=i?String(i.type):"0";return j[a]||a}var l={getBandwidth:d,getType:k,isMetered:f,isOnline:b,setOnline:c};g(l,{online:!0,offline:!0});a.addEventListener?(a.addEventListener("online",c.bind(null,!0)),a.addEventListener("offline",c.bind(null,!1))):a.attachEvent&&(a.attachEvent("online",c.bind(null,!0)),a.attachEvent("offline",c.bind(null,!1)));e.exports=l}),null);
__d("MVideoUtils",["Bootloader","CSS","DataAttributeUtils","DOM","MLegacyDataStore","Network","cx","getViewportDimensions","performance"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();var p=.5,q=0,r=null,s=null,t=null,u={PLAY_SIGIL:"playInlineVideo",INSERTION_POINT_SIGIL:"inlineVideo",LOADING_CLASS:"_2nmc",SHOWN_CLASS:"_53mu",SHOWN_CLASS_WITH_DOWNLOAD:"_2qoq",PLAYER_CLASS:"_53mv",FULL_WIDTH_PLAYER_CLASS:"_2c9v",SHOW_PAUSE_CLASS:"_3gzh",SPHERICAL_CLASS:"_4a1j",DEBUGGER_CLASS:"_4551",PLAYER_STATE:{playing:"playing",paused:"paused"},API_INSTANCE_KEY:"m_video_player_api_instance_ref",createVideoNode:function(){var a={autobuffer:"true","x-webkit-airplay":"allow",controlslist:"nodownload"};a=j.create("video",a);h.addClass(a,u.FULL_WIDTH_PLAYER_CLASS);h.addClass(a,u.PLAYER_CLASS);return a},getStoryNode:function(a){return a&&a.getNode("story-div")},_handleLoggingOnPlayWithBootload:function(a,b,c,d){__p&&__p();if(r.isLoggedIn()){d=this.getStoryNode(a)||d;if(d){a=i.getDataFt(d);if(a){d={ft:JSON.parse(a)};if(b){b=b.getLogger();b.setFTData(d)}c.fbid&&c.ownerID&&(a=s.parse(a,e.id),a.video_info={video_id:c.fbid,owner_id:c.ownerID},a=s.stringify(a));new t("/feedtracking/").setMethod("POST").setData({ft_data:a,clicked_uri:c.src,tn:c.trackingNodes}).send()}}}},handleLoggingOnPlay:function(a,b,c,d){g.loadModules(["CurrentUser","FBJSON","MRequest"],function(e,f,g){r=e,s=f,t=g,u._handleLoggingOnPlayWithBootload(a,b,c,d)},"MVideoUtils")},getHumanReadbleSize:function(a){var b=1e3,c=b*b;b=b*b*b;if(a>b)return this.formatNumber(a,b,2)+" GB";else return this.formatNumber(a,c,1)+" MB"},formatNumber:function(a,b,c){return Math.ceil(a/(b/Math.pow(10,c)))/Math.pow(10,c)},getDownloadProgressText:function(a,b){return u.getHumanReadbleSize(a)+" / "+u.getHumanReadbleSize(b)},getDownloadProgressPercentage:function(a,b){a=a/b*100;a=a.toFixed(1);return a.toString()},getConnectivityType:function(){var a=l.getType(),b=null;a=="wifi"||a=="WIFI"?b="WIFI":(a=="cellular"||a=="2g"||a=="3g"||a=="wwan")&&(b="MOBILE");return b},getNetworkBandwidth:function(){var a=null;"connection"in navigator&&("downlinkMax"in navigator.connection&&(a=navigator.connection.downlinkMax));var b=null;try{b=parseFloat(a)}catch(a){}return typeof b!=="number"||isNaN(a)?null:b},getAvailableQualitiesString:function(a){return a&&a.join(", ")},isVisible:function(a){var b=n().height,c=n().width;if(a.height===0)return!1;var d=a.y-q+(1-p)*a.height,e=a.y+p*a.height,f=a.x+(1-p)*a.width;a=a.x+p*a.width;return d<0||e>=b||f<0||a>=c?!1:!0},getVideoDataFromMVideo:function(a){return k.get(a)},calculateBandwidth:function(){__p&&__p();var a=0,b=1e3,c=125e3;return function(){__p&&__p();if(a===0)for(var d=o.getEntries(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;var h=g.responseEnd-g.responseStart;if(h>0){g=g.transferSize/h;h=g*(b/c);h>a&&(a=h)}}return a}}()};e.exports=u}),null);
__d("guid",[],(function(a,b,c,d,e,f){function a(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")}e.exports=a}),null);
__d("VideoPlayerInitializationEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REQUESTED_PLAYING:"requested_playing",STARTED_PLAYING:"started_playing"})}),null);
__d("VideoPlayerLoggerEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUTOPLAY_PREFERENCE_CHANGED:"autoplay_preference_changed",END_STALL_TIME:"end_stall_time",AUTOPLAY_PREFERENCE_STATUS:"autoplay_preference_status",ERROR_ALERT_SHOWN:"video_error_alert_shown",COMMERCIAL_BREAK_OFFSCREEN:"commercial_break_offscreen",COMMERCIAL_BREAK_ONSCREEN:"commercial_break_onscreen",NOT_AUTOPLAYING:"not_autoplaying",VIDEO_CHANNEL_NO_RELATED_VIDEO:"video_channel_no_related_video",VIDEO_ORIENTATION_CHANGED:"video_orientation_changed",AD_BREAK_STARTING_INDICATOR:"ad_break_starting_indicator",AD_BREAK_NON_INTERRUPTIVE_AD_START:"ad_break_non_interruptive_ad_start",AD_BREAK_NON_INTERRUPTIVE_AD_CLICK:"ad_break_non_interruptive_ad_click",AD_BREAK_PRE_ROLL_AD_START:"ad_break_pre_roll_ad_start",AD_BREAK_TAP_ON_TRAILER:"ad_break_tap_on_trailer",AD_BREAK_TAP_START_FROM_TRAILER:"ad_break_tap_start_from_trailer",ASSETS_LOADED:"assets_loaded",BUFFERED:"buffered",CANCELLED_REQUESTED_PLAYING:"cancelled_requested_playing",CAPTION_CHANGE:"caption_change",CAROUSEL_CHANGE:"carousel_change",CHROMECAST_AVAILABILITY_CHECKED:"chromecast_availabilty_checked",CHROMECAST_CAST_CLICKED:"chromecast_button_clicked",CHROMECAST_CAST_CONNECTED:"chromecast_connected",CHROMECAST_CAST_DISABLED:"chromecast_button_disabled",CHROMECAST_CAST_DISCONNECTED:"chromecast_disconnected",CHROMECAST_CAST_RECONNECTED:"chromecast_reconnected",CHROMECAST_CAST_VISIBLE:"chromecast_button_visible",CHROMECAST_NOT_SUPPORTED:"chromecast_not_supported",CLICK:"click",DISPLAYED:"displayed",ENTERED_FALLBACK:"entered_fallback",ENTERED_FS:"entered_fs",ENTERED_HD:"entered_hd",ERROR:"error",EXITED_FS:"exited_fs",EXITED_HD:"exited_hd",FINISHED_LOADING:"finished_loading",FINISHED_PLAYING:"finished_playing",HEADSET_CONNECTED:"headset_connected",HEADSET_DISCONNECTED:"headset_disconnected",HEART_BEAT:"heart_beat",HOST_ERROR:"host_error",HTTP_STATUS_UPDATE:"http_status_update",IMPRESSION:"impression",INLINE_CLICK_TO_PLAY:"inline_click_to_play",INVALID_URL:"invalid_url",MUTED:"muted",NO_SURFACE_UPDATE:"no_surface_update",PAUSED:"paused",PLAY_REQUESTED:"play_requested",PLAY_REQUESTED_OOB:"play_requested_oob",PLAYER_ALLOCATED:"player_allocated",PLAYER_FORMAT_CHANGED:"player_format_changed",PLAYER_LOADED:"player_loaded",PLAYING_LIVE_STARTED:"playing_live_started",PLAYING_LIVE_STOPPED:"playing_live_stopped",POP_FAILOVER:"pop_failover",PROGRESS:"progress",QUALITY_CHANGE:"quality_change",R2D2_SUMMARY:"r2d2_summary",R2D2_EVENT_VALIDATION:"r2d2_event_validation",READY_TO_PLAY:"ready_to_play",REPLAYED:"replayed",REPRESENTATION_ENDED:"representation_ended",REPRESENTATION_FIRST_ENDED:"representation_first_ended",REQUESTED:"requested",REQUESTED_PLAYING:"requested_playing",SCRUBBED:"scrubbed",SEEKED:"seeked",SPLASH_DISPLAYED:"splash_displayed",STALE:"stale",STARTED_PLAYING:"started_playing",STARTED_RECEIVING_BYTES:"started_receiving_bytes",STOPPED_PLAYING:"stopped_playing",STREAM_RESET:"stream_reset",SURFACE_UPDATED:"surface_updated",SWITCHED_IMPLEMENTATION:"switched_implementation",UNMUTED:"unmuted",UNPAUSED:"unpaused",VIDEO_CHAINING_IMPRESSION:"video_chaining_impression",VIDEO_CHAINING_TAP:"video_chaining_tap",VIDEO_CLICKED_WITHIN_PLAYER:"video_clicked_within_player",VIDEO_PLAYER_SERVICE_DISCONNECTED:"video_player_service_disconnected",VIDEO_PLAYER_SERVICE_RECONNECTED:"video_player_service_reconnected",VIDEO_PLAYER_SERVICE_UNAVAILABLE:"video_player_service_unavailable",VIDEO_PLAYING:"video_playing",VIDEO_SKIP_AD:"video_skip_ad",VOLUME_CHANGED:"volume_changed",VOLUME_DECREASE:"volume_decrease",VOLUME_INCREASE:"volume_increase",WATCH_AND_SCROLL_CHANNEL_ENTERED:"watch_and_scroll_channel_entered",WATCH_AND_SCROLL_EXITED:"watch_and_scroll_exited",WATCH_AND_SCROLL_ICON_HIGHLIGHTED:"watch_and_scroll_icon_highlighted",WATCH_AND_SCROLL_ICON_UNHIGHLIGHTED:"watch_and_scroll_icon_unhighlighted",WATCH_AND_SCROLL_PAUSED:"watch_and_scroll_paused",LIVE_SEGMENT_LOAD_ERROR:"live_segment_load_error",MANIFEST_DATA_TYPE_ERROR:"manifest_data_type_error",MANIFEST_LOAD_ERROR:"manifest_load_error",PLAYER_WARNING:"player_warning",PLAYHEAD_FELL_BEHIND_ERROR:"playhead_fell_behind_error",STREAM_SEGMENT_LOAD_ERROR:"stream_segment_load_error",UNEXPECTED_SEGMENT_ERROR:"unexpected_segment_error",NETWORK_TIMEOUT:"network_timeout",VIDEO_LOGGING_SESSION_TIMEOUT:"video_logging_session_timeout",COMPLETION:"completion",VIEW:"view",PLAYED_FOR_THREE_SECONDS:"played_for_three_seconds",GUIDE_ENTERED:"guide_entered",GUIDE_EXITED:"guide_exited",HEADING_RESET:"heading_reset",SPHERICAL_FALLBACK_ENTERED:"spherical_fallback_entered",SPHERICAL_VIDEO_FALLBACK_CTA_CLICKED:"spherical_video_fallback_cta_clicked",VIEWPORT_ROTATED:"viewport_rotated",VIEWPORT_ZOOMED:"viewport_zoomed",BANZAI_OAUTH_GK_ERROR:"banzai_oauth_gk_error",BANZAI_OAUTH_PARSE_ERROR:"banzai_oauth_parse_error",BANZAI_OAUTH_SESSION_ERROR:"banzai_oauth_session_error",VIEWABILITY_CHANGED:"viewability_changed"})}),null);
__d("VideoPlayerLoggerEventField",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ABANDON_IN_STALL:"abandon_in_stall",ACCESS_TOKEN:"access_token",AD_CLIENT_TOKEN:"ad_client_token",AD_ID:"ad_id",API_CONFIG:"api_config",APP_ID:"app_id",APP_VERSION:"app_version",AUDIO_CHANNEL_LAYOUT:"audio_ch_conf",AUTH_FLAG:"auth_flag",AUTOPLAY_ELIGIBLE:"autoplay_eligible",AUTOPLAY_FAILURE_REASONS:"autoplay_failure_reasons",AUTOPLAY_SETTING:"autoplay_setting",AVAILABLE_QUALITIES:"available_qualities",BATTERY_LEVEL:"battery_level",BROADCASTER_ORIGIN:"broadcaster_origin",BUILD_VERSION:"build_version",CAPTION_STATE:"caption_state",CAST_CLIENT_APP_ID:"cast_client_app_id",CAST_CLIENT_APP_VERSION:"cast_client_app_version",CAST_SESSION_ID:"cast_session_id",CHANNEL_ELIGIBILITY:"channel_eligibility",CHROMECAST_RECEIVER_AVAILABLE:"chromecast_receiver_available",CLIENT_UNIX_TIME:"client_unix_time",CONNECTIVITY_SUBTYPE:"connectivity_subtype",CONNECTIVITY_TYPE:"connectivity_type",CREATOR_APP_ID:"creator_app_id",CURRENT_VIEWABILITY_PERCENTAGE:"current_viewability_percentage",VIEWABILITY_DEBUG_REASON:"viewability_debug_reason",CURRENT_VOLUME:"current_volume",DATA_CONNECTION_QUALITY:"data_connection_quality",DEBUG_REASON:"debug_reason",DEVICE_ID:"device_id",DURATION:"duration",ERROR:"error",ERROR_CODE:"error_code",ERROR_DESCRIPTION:"error_description",ERROR_DOMAIN:"error_domain",ERROR_USER_INFO:"error_user_info",EVENT_NAME:"name",EVENT_BATCH:"batch",EXTERNAL_LOG_ID:"external_log_id",EXTERNAL_LOG_TYPE:"external_log_type",FB_BANDWIDTH:"fb_bandwidth",FEED_POSITION:"feed_position",FIRST_STALL_START_POSITION:"first_stall_start_position",FIRST_STALL_TIME:"first_stall_time",FT:"ft",GKS:"gks",HAS_BEEN_LIVE:"has_been_live",HD:"hd",HEADSET_STATE:"headset_state",HLS_CURRENT_SEGMENT_URI:"current_segment_uri",HLS_LOADING_SEGMENT_URI:"loading_segment_uri",HLS_SEGMENT_URI:"segment_uri",HLS_STREAM_DATA:"stream_data",HOST_VIDEO_ID:"host_video_id",INLINE:"inline",INSTREAM_VIDEO_AD_BREAK_INDEX:"instream_video_ad_break_index",INSTREAM_VIDEO_AD_BREAK_VIDEO_ID:"instream_video_ad_break_video_id",INTERRUPT_COUNT:"interrupt_count",INTERRUPT_TIME:"interrupt_time",IS_ABR_ENABLED:"is_abr_enabled",IS_AUTO_ADVANCED:"is_auto_advanced",IS_FREE:"is_free",IS_HDS:"is_hds",IS_LIVE_STREAMING:"is_live_streaming",IS_SHOW_VIDEO:"is_show_video",IS_STALLING:"is_stalling",IS_TEMPLATED_MANIFEST:"is_templated_manifest",LAST_VIEWABILITY_PERCENTAGE:"last_viewability_percentage",NEXT_REPRESENTATION_ID:"next_representation_id",ORIGINAL_VIDEO_ID:"original_video_id",OUTER_STORY_IDENTIFIER:"outer_story_identifier",PLAYBACK_BROADCAST_STATUS:"playback_broadcast_status",PLAYBACK_DURATION:"playback_duration",PLAYBACK_IS_LIVE_STREAMING:"playback_is_live_streaming",PLAYER_FORMAT:"player_format",PLAYER_ORIGIN:"player_origin",PLAYER_STATE:"player_state",PLAYER_SUBORIGIN:"player_suborigin",PLAYER_VERSION:"player_version",POSITION_IN_CHANNEL:"position_in_channel",POSITION_IN_UNIT:"position_in_unit",PROJECTION:"projection",QES:"qes",REACTION_VIDEO_CHANNEL_ID:"video_channel_id",REACTION_VIDEO_CHANNEL_TYPE:"reaction_video_channel_type",REACTION_VIDEO_CHANNEL_SUBTYPE:"reaction_video_channel_subtype",REASON:"reason",RECENT_STALLS_COUNT:"recent_stalls_count",RECENT_STALLS_TOTAL_COUNT:"recent_stalls_total_count",REFERRER:"referrer",REPRESENTATION_ID:"representation_id",RESOURCE_URL:"resource_url",SAVED_OFFLINE:"saved_offline",SEQ_NUM:"seq_num",SESSION_START_TIME:"session_start_time",SHOW_VIDEO_TYPE:"show_video_type",SOURCE:"source",SPHERICAL_FALLBACK_TYPE:"spherical_fallback_type",STALL_COUNT:"stall_count",STALL_INFO_JSON:"stall_info_json",STALL_TIME:"stall_time",STATE:"state",STREAM_TYPE:"stream_type",STREAMING_FORMAT:"streaming_format",TIME:"time",TIME_DELTA:"time_delta",TIME_MS:"time_ms",TIME_SINCE_CREATION:"time_since_creation",TIME_SPENT_ID:"time_spent_id",TIME_UNTIL_INTERRUPT:"time_until_interrupt",TOTAL_STALL_TIME:"total_stall_time",TRACKING:"tracking",TV_SESSION_ID:"tv_session_id",UNIQUE_TIME_SPENT_MS:"unique_time_spent_ms",UNIT_POSITION:"unit_position",UPSTREAM_PLAYER_SOURCE:"upstream_player_source",USER_ASN:"user_asn",USER_ID:"user_id",V2_HEART_BEAT:"v2_heart_beat",VIDEO_BANDWIDTH:"video_bandwidth",VIDEO_CHAINING_DEPTH_LEVEL:"video_chaining_depth_level",VIDEO_CHAINING_SESSION_ID:"video_chaining_session_id",VIDEO_CHANNEL_ID:"video_channel_id",VIDEO_CHANNEL_TYPE:"video_channel_type",VIDEO_HOME_SESSION_ID:"video_home_session_id",VIDEO_ID:"video_id",VIDEO_LAST_START_TIME_POSITION:"video_last_start_time_position",VIDEO_PLAY_REASON:"video_play_reason",VIDEO_PLAYER_HEIGHT:"video_player_height",VIDEO_PLAYER_WIDTH:"video_player_width",VIDEO_QUALITY:"video_quality",VIDEO_TIME_POSITION:"video_time_position",VIDEO_BUFFER_END_POSITION:"video_buffer_end_position",VIDEO_TIME_RATIO:"video_time_ratio",VIEWABILITY_PERCENTAGE:"viewability_percentage",WATCH_AND_GO_SESSION_ID:"watch_and_go_session_id",FEED_AGGREGATION_TYPE:"feed_aggregation_type",HAS_BLOCKED_PAUSED_REPRESENTATION_ENDED:"has_blocked_paused_representation_ended",IS_LIVE_VIDEO_REWOUND:"is_live_video_rewound",PLAYER_INSTANCE_KEY:"player_instance_key",SOURCE_CREATION_TIME:"source_creation_time",TRANSCODING_METHOD:"transcoding_method",VIDEO_INIT_SEQ_ID:"video_init_seq_id",VIDEO_PLAY_SUBREASON:"video_play_subreason",IS_DEEPLINK_USER:"is_deeplink_user",IS_FIRST_TIME_USER:"is_first_time_user",VIDEO_CLIP_START_TIME_MS:"video_clip_start_time_ms",AD_BREAK_VIEWER_SESSION_ID:"ad_break_viewer_session_id",SEEK_FROM_VIDEO_TIME_POSITION:"seek_from_video_time_position",LIVING_ROOM_SESSION_ID:"living_room_session_id",VIOLATION_FOUND:"violation_found",EVENT_SEQ_NUM:"event_seq_num",DETECTION_ID:"detection_id",ACTUAL_VIEWABILITY_VALUE:"actual_viewability_value",DROPPED_FRAME_COUNT:"dropped_frame_count",TOTAL_FRAME_COUNT:"total_frame_count",VISITATION_ID:"visitation_id",PIGEON_SESSION_ID:"pigeon_session_id",IS_FBMS:"is_fbms",FORCE_SAMPLE_LOGGING:"force_sample_logging",IS_ADS_PREVIEW:"is_ads_preview",IS_INJECTED_ADS:"is_injected_ads"})}),null);
__d("VideoPlayerLoggerSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADS:"ads",ANIMATED_IMAGE_SHARE:"animated_image_share",ASSET:"asset",BROADCAST_REQUEST_ATTACHMENT:"broadcast_request_attachment",CAMERA_POST:"camera_post",CHAINED:"chained",CHAINED_SUGGESTION:"chained_suggestion",CHANNEL:"channel",CONTINUE_WATCHING_RECOMMENDATION:"continue_watching_recommendation",EMBEDDED:"embedded",EMBEDDED_PAGE_PLUGIN:"embedded_page_plugin",EMBEDDED_VIDEO:"embedded_video",EMBEDDED_VIDEO_FROM_UFI:"embedded_video_from_ufi",EMBEDDED_VIDEO_PREVIEW:"embedded_video_preview",GAMEROOM_LIVE_VIDEO_HERO_BANNER:"gameroom_live_video_hero_banner",GAMEROOM_LIVE_VIDEO_TAB:"gameroom_live_video_tab",GAMEROOM_LIVE_VIDEO_THUMBNAIL:"gameroom_live_video_thumbnail",GAMES_VIDEO_LIVE_RECOMMENDATION:"games_video_live_recommendation",GAMES_VIDEO_HOME:"games_video_home",GAMES_VIDEO_HOME_HERO:"games_video_home_hero",GAMES_VIDEO_HOME_STREAMER_HUB:"games_video_home_streamer_hub",GAMES_VIDEO_SINGLE_GAME:"games_video_single_game",GAMES_VIDEO_SEARCH_UNIT:"games_video_search_unit",GAMES_VIDEO_SOCIAL_PLUGIN:"games_video_social_plugin",GAMES_VIDEO_HUB:"games_video_hub",GAMES_VIDEO_HUB_REDIRECT_NOTIFICATION:"games_video_hub_redirect_notification",GAMES_VIDEO_HUB_REDIRECT_UNKNOWN:"games_video_hub_redirect_unknown",GROUP_LIVE_VIDEO_MODULE:"group_live_video_module",HTML5:"html5",INLINE:"inline",INSIGHTS:"insights",INTERN_EXAMPLE:"intern_example",ISSUES_MODULE:"issues_module",LIVE_BEEPER:"live_beeper",LIVE_CONTROL_PANEL:"live_control_panel",LIVE_MAP:"live_map",LIVE_MAP_LISTVIEW:"live_map_listview",LIVE_MAP_SIDEBAR:"live_map_sidebar",LIVE_MAP_TOOLTIP:"live_map_tooltip",LIVE_MAP_TOOLTIP_FROM_LISTVIEW:"live_map_tooltip_from_listview",LIVE_MAP_TOOLTIP_FROM_MAP:"live_map_tooltip_from_map",LIVE_MAP_TOOLTIP_FROM_WEBGL:"live_map_tooltip_from_webgl",LIVE_VIDEO_BROADCAST:"live_video_broadcast",LIVE_VIDEO_PREVIEW:"live_video_preview",LIVING_ROOM:"living_room",LIVING_ROOM_RECAP_FULLSCREEN:"living_room_recap_fullscreen",LIVING_ROOM_RECAP_INLINE:"living_room_recap_inline",LOOKBACK:"lookback",MEDIA_COLLAGE:"media_collage",MEMORY_LEAK_TEST:"memory_leak_test",MESSAGING:"messaging",MISC:"misc",MOBILE:"mobile",NOT_SPECIFIED_PLEASE_FIX:"not_specified_please_fix",OFFERS_DETAIL:"offers_detail",PAGE_LIVE_VIDEO_MODULE:"page_live_video_module",PAGES_FINCH_MAIN_VIDEO:"pages_finch_main_video",PAGES_FINCH_THUMBNAIL_VIDEO:"pages_finch_thumbnail_video",PAGES_FINCH_TRAILER:"pages_finch_trailer",PAGES_VIDEO_SET:"pages_video_set",PAGES_COVER:"pages_cover",PAGES_TIMELINE_PAGES_COVER:"pages_timeline_pages_cover",PAGES_COVER_HOVER:"pages_cover_hover",PAGES_HOME_HERO:"pages_home_hero",VIDEO_PAGE_SPOTLIGHT_UNIT:"video_page_spotlight_unit",VIDEO_PAGE_VIDEO_LIST:"video_page_video_list",PERMALINK:"permalink",PROFILE_OVERVIEW:"profile_overview",PROFILE_COVER:"profile_cover",PROFILE_VIDEO:"profile_video",PROFILE_VIDEO_HOVERCARD:"profile_video_hovercard",PROFILE_VIDEO_THUMB:"profile_video_thumb",REPORT_FLOW:"report_flow",REVIEW:"review",SEARCH_LIVE_VIDEO_MODULE:"search_live_video_module",SERP_VIDEOS_TAB:"serp_videos_tab",SLIDESHOW:"slideshow",SNOWLIFT:"snowlift",SRT_REVIEW:"srt_review",TAHOE:"tahoe",TOPIC_CHANNEL_LIVING_ROOM:"topic_channel_living_room",TOPIC_GAMING:"topic_gaming",TRAILER_OG_ATTACHMENT:"trailer_og_attachment",TRAILER_TIMELINE_COLLECTIONS:"trailer_timeline_collections",TRAILER_TIMELINE_UNIT:"trailer_timeline_unit",TRIVIA_GAME_ADMIN_DASHBOARD:"trivia_game_admin_dashboard",TV:"tv",USER_VIDEO_TAB:"user_video_tab",VIDEO_COPYRIGHT_PREVIEW:"video_copyright_preview",VIDEO_HOME_INLINE:"video_home_inline",VIDEO_HOME_EXPLORE:"discover",VIDEO_HOME_WATCHLIST:"watchlist",VIDEO_INLINE_CHAINING:"video_inline_chaining",VIDEOHUB_FEATURED:"videohub_featured",VIDEOHUB_LIVE:"videohub_live",VIDEOHUB_PLAYLIST:"videohub_playlist",WATCH_SCROLL:"watch_scroll",UFI_COMMENT_ATTACHMENT:"ufi_comment_attachment",LIVE_AUTOPLAY_WATCH_AND_SCROLL:"live_autoplay_watch_and_scroll",GAMES_VIDEO_STREAMER_SEARCH_UNIT:"games_video_streamer_unit",GAMES_STREAMER_DASHBOARD:"games_streamer_dashboard",ADS_PREVIEW:"ads_preview"})}),null);
__d("R2D2VideoMetadata",["uuid"],(function(a,b,c,d,e,f,g){__p&&__p();var h=1e3,i=10;function a(a){"use strict";this.$1=a.video_id,this.$2=a.ad_client_token,this.$3=a.player_origin,this.$4=a.player_instance_key,this.$6=parseInt(a.playback_duration*h,i),this.$5=g()}a.prototype.toJSON=function(){"use strict";return{video_id:this.$1,ad_client_token:this.$2,player_origin:this.$3,player_instance_key:this.$4,r2d2_session_id:this.$5,duration_ms:this.getDurationMs()}};a.prototype.getVideoId=function(){"use strict";return this.$1};a.prototype.getDurationMs=function(){"use strict";return parseInt(this.$6,i)};a.prototype.setDurationMs=function(a){"use strict";this.$6=a};e.exports=a}),null);
__d("R2D2VideoWatchTimeSegment",[],(function(a,b,c,d,e,f){__p&&__p();function a(a,b){"use strict";this.$1=a,this.$2=b}a.prototype.getStartTimeMs=function(){"use strict";return this.$1};a.prototype.getEndTimeMs=function(){"use strict";return this.$2};e.exports=a}),null);
__d("R2D2VideoState",["R2D2VideoWatchTimeSegment"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,b){"use strict";this.$1=a,this.$2=b,this.reset()}a.prototype.startPlaying=function(a){"use strict";this.$3||(this.$3=!0,this.$4=a)};a.prototype.stopPlaying=function(a){"use strict";this.$3&&(this.$3=!1,this.addPlaySegment(this.$4,a))};a.prototype.addPlaySegment=function(a,b){"use strict";__p&&__p();if(a>=b)return;b=new g(a,b);var c=!1;for(var d=0;d<this.$5.length;d++)if(this.$5[d].getStartTimeMs()>a){this.$5.splice(d,0,b);c=!0;break}c||this.$5.push(b)};a.prototype.getVideoId=function(){"use strict";return this.$1};a.prototype.getDurationMs=function(){"use strict";return this.$2};a.prototype.getWatchedSegments=function(){"use strict";return this.$5};a.prototype.reset=function(){"use strict";this.$3=!1,this.$4=0,this.$5=[]};e.exports=a}),null);
__d("R2D2VideoSession",["R2D2VideoState"],(function(a,b,c,d,e,f,g){__p&&__p();var h=1e3;function a(a,b,c){"use strict";this.$4=new g(a.getVideoId(),a.getDurationMs()),this.$5=b,this.$6=c,this.$7=a}a.prototype.addEvent=function(event,a){"use strict";this.$5.processEvent(event,a,this.$4),this.$7.setDurationMs(Math.max(this.$7.getDurationMs(),a.playback_duration*h)),this.$2=new Date(),this.$3=!0};a.prototype.hasUpdates=function(){"use strict";return this.$3};a.prototype.recalculateDelta=function(){"use strict";var a=this.$6.calculateDelta(this.$1,this.$4);this.$1=a;this.$3=!1;return a};a.prototype.getMetadata=function(){"use strict";return this.$7};e.exports=a}),null);
__d("R2D2VideoStateMachine",["VideoPlayerLoggerEvent"],(function(a,b,c,d,e,f,g){__p&&__p();var h=1e3;function a(){"use strict"}a.prototype.processEvent=function(event,a,b){"use strict";switch(event){case g.STARTED_PLAYING:case g.UNPAUSED:b.startPlaying(a.video_time_position*h);break;case g.FINISHED_PLAYING:case g.PAUSED:b.stopPlaying(a.video_time_position*h);break}};e.exports=a}),null);
__d("R2D2UniqueTimeSpentMetric",[],(function(a,b,c,d,e,f){__p&&__p();var g="unique_time_spent_ms";a.prototype.compute=function(a){"use strict";return this.$1(a)};a.prototype.computeDelta=function(a,b){"use strict";return a-b};a.prototype.getMetricName=function(){"use strict";return g};a.prototype.$1=function(a){"use strict";__p&&__p();var b=0,c=0;a=a.getWatchedSegments();for(var d=0;d<a.length;d++){var e=a[d],f=e.getEndTimeMs();if(f>b){f=Math.max(b,e.getStartTimeMs());c+=e.getEndTimeMs()-f;b=e.getEndTimeMs()}}f=10;return parseInt(c,f)};function a(){"use strict"}e.exports=a}),null);
__d("R2D2PlayCountMetric",["R2D2UniqueTimeSpentMetric"],(function(a,b,c,d,e,f,g){__p&&__p();var h="play_count";a.prototype.compute=function(a){"use strict";var b=new g();return a.getWatchedSegments().length>0&&b.compute(a)>0?1:0};a.prototype.computeDelta=function(a,b){"use strict";return a-b};a.prototype.getMetricName=function(){"use strict";return h};function a(){"use strict"}e.exports=a}),null);
__d("R2D2VideoStateSummary",[],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this.$1=new Map()}a.prototype.getMetricValue=function(a){"use strict";return this.$1.get(a)||null};a.prototype.setMetricValue=function(a,b){"use strict";this.$1.set(a,b)};a.prototype.toJSON=function(){"use strict";var a={};this.$1.forEach(function(b,c){a[c]=b});return a};e.exports=a}),null);
__d("R2D2ViewCountMetric",["R2D2UniqueTimeSpentMetric"],(function(a,b,c,d,e,f,g){__p&&__p();var h="view_count",i=3e3,j=.97;a.prototype.compute=function(a){"use strict";var b=new g();return b.compute(a)>=i||a.getDurationMs()>0&&b.compute(a)>=a.getDurationMs()*j?1:0};a.prototype.computeDelta=function(a,b){"use strict";return a-b};a.prototype.getMetricName=function(){"use strict";return h};function a(){"use strict"}e.exports=a}),null);
__d("R2D2VideoStateSummaryCalculator",["R2D2PlayCountMetric","R2D2UniqueTimeSpentMetric","R2D2VideoStateSummary","R2D2ViewCountMetric"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();function a(){"use strict";this.$1=[new h(),new g(),new j()]}a.prototype.calculateDelta=function(a,b){"use strict";__p&&__p();var c=new i();this.$1.forEach(function(d){var e=d.compute(b);if(a!==undefined){var f=a.getMetricValue(d.getMetricName());e=d.computeDelta(e,f)}c.setMetricValue(d.getMetricName(),e)});return c};e.exports=a}),null);
__d("R2D2Logger",["Banzai","R2D2VideoMetadata","R2D2VideoSession","R2D2VideoStateMachine","R2D2VideoStateSummaryCalculator","gkx"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m=10*1e3,n="video_player",o="r2d2_summary";function a(a){"use strict";this.$4=a,this.$2=new k(),this.$1=new Map()}a.prototype.setScriptPath=function(a){"use strict";this.$3=a};a.prototype.$5=function(a,b){"use strict";return a+":"+b};a.prototype.addEvent=function(event,a){"use strict";var b=this.$5(a.player_instance_key,a.video_id),c=this.$1.get(b);c==null&&(c=new i(new h(a),new j(),this.$2),this.$1.set(b,c));c.addEvent(event,a);setTimeout(function(){return this.$6()}.bind(this),m)};a.prototype.$6=function(){"use strict";this.$1.forEach(function(a,b){if(a.hasUpdates()){b=this.createR2D2SummaryLoggingData(a.getMetadata(),a.recalculateDelta());g.post(n,b)}}.bind(this))};a.prototype.createR2D2SummaryLoggingData=function(a,b){"use strict";a=Object.assign(a.toJSON(),b.toJSON());return{event:o,logData:a,scriptPath:this.$3,source:this.$4}};a.prototype.shouldLogForR2D2=function(){"use strict";return l("AT7jlJv9DbEnKNedHGdyr-TVhI_ulMo3WNph9a8Ltip2bVKjueYdorsoB4LbZB2k9do")};e.exports=a}),null);
__d("VideoPlayerLoggerErrorStates",[],(function(a,b,c,d,e,f){e.exports={PLAYBACK_FAILURE:"playback_failure",PLAYER_FAILURE:"player_failure"}}),null);
__d("VideoPlayerLoggerErrors",[],(function(a,b,c,d,e,f){e.exports={ENTERED_FALLBACK:"entered_fallback",ERROR_CALLING_FLASH:"error_calling_flash"}}),null);
__d("VideoPlayerLoggerFallbackReasons",[],(function(a,b,c,d,e,f){e.exports={TIMEOUT:"timeout",FLASH_ERROR:"flash_error",FLASH_UNAVAILABLE:"flash_unavailable"}}),null);
__d("VideoPlayerLoggerPlayerStates",[],(function(a,b,c,d,e,f){e.exports={STARTED:"started",UNPAUSED:"unpaused"}}),null);
__d("VideoPlayerLogger",["Banzai","FBLogger","R2D2Logger","VideoPlayerExperiments","VideoPlayerHTML5Experiments","VideoPlayerInitializationEvent","VideoPlayerLoggerErrors","VideoPlayerLoggerErrorStates","VideoPlayerLoggerEvent","VideoPlayerLoggerFallbackReasons","VideoPlayerLoggerPlayerStates","VideoPlayerLoggerSource","invariant","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";__p&&__p();var u=k.useBanzaiVitalForLive,v=k.discerningAbandonStallLogging,w="video_player",x=5e3,y=function(){return k.useMonotonicallyIncreasingTimers?t():Date.now()};function a(a,b){this.$2=a,this.$3=null,this.$6={},this.$4=b,this.$8=0,this.$9=0,this.$10=0,this.$11=0,this.$7=[],this.$19=0,this.$20=0,this.$12=0,this.$27=!1,this.$16=!1,this.$29(),this.$30(),this.$28=new i(this.$2)}a.prototype.updateSource=function(a){this.$2=a};a.prototype.getSource=function(){return this.$2};a.prototype.logEvent=function(event,a){__p&&__p();a=babelHelpers["extends"]({},a,this.$4);a.initial_event=!Object.prototype.hasOwnProperty.call(this.$6,event);Object.prototype.hasOwnProperty.call(a,"time_ms")||(a.time_ms=y());Object.prototype.hasOwnProperty.call(a,"time")||(a.time=Math.round(a.time_ms/1e3));a.is_stalling=this.$31();a.error_user_info=this.$32(a.error_user_info);this.$3&&Object.assign(a,this.$3);switch(event){case o.PAUSED:case o.FINISHED_PLAYING:if(this.$24){var b=this.$24,c=b.getABREvaluation();a.ideal_samples=c.idealSamples;a.conservative_samples=c.conservativeSamples;a.aggressive_samples=c.aggressiveSamples;a.conservative_resolution_constrained_samples=c.conservativeResolutionConstrainedSamples;a.last_quality_switch_reason=c.lastQualitySwitchReason;a.reason&&b.setLastQualitySwitchReason(a.reason)}c=typeof this.$25==="function"&&this.$25();b=typeof this.$26==="function"&&this.$26();typeof b==="number"&&typeof c==="number"&&(a.dropped_frame_count=c,a.total_frame_count=b);break}switch(event){case o.STARTED_PLAYING:case o.UNPAUSED:this.$27=!0;break;case o.FINISHED_PLAYING:case o.ERROR:case o.PAUSED:this.$27=!1;break}switch(event){case o.REQUESTED_PLAYING:this.$29();this.$33();this.$6[o.STARTED_PLAYING]?a.state=q.UNPAUSED:a.state=q.STARTED;break;case o.STARTED_PLAYING:case o.UNPAUSED:case o.FINISHED_PLAYING:case o.CANCELLED_REQUESTED_PLAYING:case o.ERROR:case o.PAUSED:case o.REPRESENTATION_ENDED:case o.HEART_BEAT:if(event===o.ERROR&&j.disableStallLoggingForError)break;if(event==o.REPRESENTATION_ENDED&&!this.$6[o.STARTED_PLAYING])break;if(event===o.HEART_BEAT&&(!this.$6[o.STARTED_PLAYING]||!k.heartbeatUpdateWatchTimeV2||this.$31()))break;event===o.HEART_BEAT&&(a.v2_heart_beat=!0);(event===o.STARTED_PLAYING||event===o.UNPAUSED)&&(this.$12=a.time_ms,this.$34());if(event===o.ERROR&&a.state!==n.PLAYBACK_FAILURE)break;event===o.CANCELLED_REQUESTED_PLAYING&&(this.$6[o.STARTED_PLAYING]?a.state=q.UNPAUSED:a.state=q.STARTED);this.$35();this.$36();(event===o.PAUSED||event===o.FINISHED_PLAYING)&&(v&&event===o.FINISHED_PLAYING&&this.$34(),a.recent_stalls_count=this.$37());this.$38();this.$39(a);this.$40(a);this.$30();v&&this.$34();this.$29();break}c={logData:a,event:event,scriptPath:this.$1,source:this.$2};event||h("video").warn("Missing event name");this.$6[event]=!0;if(this.$2===r.ANIMATED_IMAGE_SHARE)return null;a.ad_client_token||u&&a.playback_is_live_streaming?g.post(w,c,g.VITAL):k.useVitalForClosing&&(event===o.PAUSED||event===o.FINISHED_PLAYING||event===o.HEART_BEAT)?g.post(w,c,g.VITAL):k.useVitalForOpening&&(event===o.UNPAUSED||event===o.STARTED_PLAYING)?g.post(w,c,g.VITAL):g.post(w,c);this.$28.shouldLogForR2D2()&&this.$28.addEvent(event,a);return c};a.prototype.setScriptPath=function(a){this.$1=a,this.$28.setScriptPath(a)};a.prototype.setFTData=function(a){this.$3=a};a.prototype.setABRQualityTracker=function(a){this.$24=a};a.prototype.setFrameCountGetters=function(a,b){this.$25=a,this.$26=b};a.prototype.startBuffering=function(a){this.$33(a)};a.prototype.endBuffering=function(){this.$36(),this.$41(),this.$35(),this.$38()};a.prototype.startInterrupt=function(){this.$42()};a.prototype.endInterrupt=function(){this.$36(),this.$41()};a.prototype.$31=function(){return this.$15>0};a.prototype.$33=function(a){if(this.$31())return;this.$16=this.$27;this.$15=Date.now();a!==undefined&&this.$6[o.STARTED_PLAYING]&&(this.$17=a)};a.prototype.$42=function(){if(this.$43())return;this.$21=Date.now()};a.prototype.$43=function(){return this.$21>0};a.prototype.$44=function(){return!this.$43()?0:Date.now()-this.$21};a.prototype.$45=function(){return this.$31()?Date.now()-this.$15:0};a.prototype.$36=function(){if(this.$43()){var a=this.$44();this.$22+=a;this.$20+=a;this.$23+=1;this.$19+=1}};a.prototype.$41=function(){this.$43()&&(this.$21=0)};a.prototype.$30=function(){this.$22=0,this.$23=0,this.$41()};a.prototype.$35=function(){__p&&__p();if(this.$31()){var a=this.$45();this.$17!==null&&(this.$18=a);this.$14+=a;this.$9+=a;this.$13++;this.$8++;this.$16&&(this.$11+=a,this.$10++,this.$16=!1);v&&this.$7.push(y())}};a.prototype.$38=function(){this.$31()&&(this.$15=0)};a.prototype.$32=function(a){return a&&typeof a==="object"?JSON.stringify(a):a};a.prototype.getCumulativeStallCount=function(){return this.$8};a.prototype.getCumulativeInPlayStallCount=function(){return this.$10};a.prototype.getStallCount=function(){return this.$13};a.prototype.getCumulativeStallTime=function(){return this.$9+this.$45()};a.prototype.getCumulativeInPlayStallTime=function(){return this.$11+(this.$16?this.$45():0)};a.prototype.getCumulativeInterruptCount=function(){return this.$19};a.prototype.getCumulativeInterruptTime=function(){return this.$20+this.$44()};a.prototype.$39=function(a){a.stall_time=Math.max(0,this.$14),a.stall_count=this.$13,this.$18&&(a.first_stall_time=this.$18,a.first_stall_start_position=this.$17)};a.prototype.$40=function(a){a.interrupt_time=Math.max(0,this.$22),a.interrupt_count=this.$23};a.prototype.$37=function(){var a=y(),b=a-x;this.$7=this.$7.filter(function(a){return a>=b});v||this.$13>0&&this.$7.push(a);return this.$7.length};a.prototype.$29=function(){this.$14=0,this.$15=0,this.$13=0,this.$17=null,this.$18=0};a.prototype.$34=function(){this.$7=[]};a.prototype.getFTdata=function(){return this.$3};a.Sources=r;a.Errors=m;a.FallbackReasons=p;a.ErrorStates=n;a.PlayerStates=q;e.exports=a}),null);
__d("regeneratorRuntime",["Promise"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=Object.prototype.hasOwnProperty,i=typeof Symbol==="function"&&(typeof Symbol==="function"?Symbol.iterator:"@@iterator")||"@@iterator",j=e.exports;function k(a,b,c,d){b=Object.create((b||r).prototype);d=new A(d||[]);b._invoke=x(a,c,d);return b}j.wrap=k;function l(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}var m="suspendedStart",n="suspendedYield",o="executing",p="completed",q={};function r(){}function s(){}function t(){}var u=t.prototype=r.prototype;s.prototype=u.constructor=t;t.constructor=s;s.displayName="GeneratorFunction";function a(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}j.isGeneratorFunction=function(a){a=typeof a==="function"&&a.constructor;return a?a===s||(a.displayName||a.name)==="GeneratorFunction":!1};j.mark=function(a){Object.setPrototypeOf?Object.setPrototypeOf(a,t):Object.assign(a,t);a.prototype=Object.create(u);return a};j.awrap=function(a){return new v(a)};function v(a){this.arg=a}function w(a){__p&&__p();function b(b,e){var f=a[b](e);b=f.value;return b instanceof v?g.resolve(b.arg).then(c,d):g.resolve(b).then(function(a){f.value=a;return f})}typeof process==="object"&&process.domain&&(b=process.domain.bind(b));var c=b.bind(a,"next"),d=b.bind(a,"throw");b.bind(a,"return");var e;function f(a,c){var d=e?e.then(function(){return b(a,c)}):new g(function(d){d(b(a,c))});e=d["catch"](function(a){});return d}this._invoke=f}a(w.prototype);j.async=function(a,b,c,d){var e=new w(k(a,b,c,d));return j.isGeneratorFunction(b)?e:e.next().then(function(a){return a.done?a.value:e.next()})};function x(a,b,c){__p&&__p();var d=m;return function(e,f){__p&&__p();if(d===o)throw new Error("Generator is already running");if(d===p){if(e==="throw")throw f;return C()}while(!0){var g=c.delegate;if(g){if(e==="return"||e==="throw"&&g.iterator[e]===undefined){c.delegate=null;var h=g.iterator["return"];if(h){h=l(h,g.iterator,f);if(h.type==="throw"){e="throw";f=h.arg;continue}}if(e==="return")continue}h=l(g.iterator[e],g.iterator,f);if(h.type==="throw"){c.delegate=null;e="throw";f=h.arg;continue}e="next";f=undefined;var i=h.arg;if(i.done)c[g.resultName]=i.value,c.next=g.nextLoc;else{d=n;return i}c.delegate=null}if(e==="next")d===n?c.sent=f:c.sent=undefined;else if(e==="throw"){if(d===m){d=p;throw f}c.dispatchException(f)&&(e="next",f=undefined)}else e==="return"&&c.abrupt("return",f);d=o;h=l(a,b,c);if(h.type==="normal"){d=c.done?p:n;var i={value:h.arg,done:c.done};if(h.arg===q)c.delegate&&e==="next"&&(f=undefined);else return i}else h.type==="throw"&&(d=p,e="throw",f=h.arg)}}}a(u);u[i]=function(){return this};u.toString=function(){return"[object Generator]"};function y(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]);2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]);this.tryEntries.push(b)}function z(a){var b=a.completion||{};b.type="normal";delete b.arg;a.completion=b}function A(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(y,this),this.reset(!0)}j.keys=function(a){__p&&__p();var b=[];for(var c in a)b.push(c);b.reverse();return function c(){__p&&__p();while(b.length){var d=b.pop();if(d in a){c.value=d;c.done=!1;return c}}c.done=!0;return c}};function B(a){__p&&__p();if(a){var b=a[i];if(b)return b.call(a);if(typeof a.next==="function")return a;if(!isNaN(a.length)){var c=-1;b=function b(){while(++c<a.length)if(h.call(a,c)){b.value=a[c];b.done=!1;return b}b.value=undefined;b.done=!0;return b};return b.next=b}}return{next:C}}j.values=B;function C(){return{value:undefined,done:!0}}A.prototype={constructor:A,reset:function(a){this.prev=0;this.next=0;this.sent=undefined;this.done=!1;this.delegate=null;this.tryEntries.forEach(z);if(!a)for(var b in this)b.charAt(0)==="t"&&h.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=undefined)},stop:function(){this.done=!0;var a=this.tryEntries[0];a=a.completion;if(a.type==="throw")throw a.arg;return this.rval},dispatchException:function(a){__p&&__p();if(this.done)throw a;var b=this;function c(c,d){f.type="throw";f.arg=a;b.next=c;return!!d}for(var d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if(e.tryLoc==="root")return c("end");if(e.tryLoc<=this.prev){var g=h.call(e,"catchLoc"),i=h.call(e,"finallyLoc");if(g&&i){if(this.prev<e.catchLoc)return c(e.catchLoc,!0);else if(this.prev<e.finallyLoc)return c(e.finallyLoc)}else if(g){if(this.prev<e.catchLoc)return c(e.catchLoc,!0)}else if(i){if(this.prev<e.finallyLoc)return c(e.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(a,b){__p&&__p();for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&h.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&(a==="break"||a==="continue")&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);d=e?e.completion:{};d.type=a;d.arg=b;e?this.next=e.finallyLoc:this.complete(d);return q},complete:function(a,b){if(a.type==="throw")throw a.arg;a.type==="break"||a.type==="continue"?this.next=a.arg:a.type==="return"?(this.rval=a.arg,this.next="end"):a.type==="normal"&&b&&(this.next=b)},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a){this.complete(c.completion,c.afterLoc);z(c);return q}}},"catch":function(a){__p&&__p();for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if(d.type==="throw"){var e=d.arg;z(c)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){this.delegate={iterator:B(a),resultName:b,nextLoc:c};return q}}}),null);